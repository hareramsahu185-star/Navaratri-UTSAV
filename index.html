<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú® Navratri Utsav - Celebrate Garba & Dandiya ‚ú®</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Hind:wght@300;400&family=Tiro+Devanagari+Hindi&display=swap" rel="stylesheet">
<style>
    /* Reset and Basic Setup */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Hind', sans-serif;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        background: linear-gradient(180deg, #2b0036 0%, #120012 60%); /* Navratri night gradient */
        cursor: none; /* Hide default cursor for custom trail */
        padding: 15px; /* Add some padding for small screens */
    }
    

    /* === PRE-LOADER === */
    #preloader {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: radial-gradient(circle at 50% 30%, #4b0038 0%, #0b0010 40%);
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        color: #FFB300;
        font-family: 'Tiro Devanagari Hindi', serif;
        font-size: 2rem;
        transition: opacity 1s ease-in-out;
    }
    .loader-text {
        animation: pulseText 2s infinite ease-in-out;
    }
    @keyframes pulseText {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }

    /* === DIVINE BACKGROUND === */
    .bg-divine {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: radial-gradient(ellipse at 70% 30%, #7b1fa2 0%, #2b0036 40%, #120012 100%);
        z-index: -1;
    }
    #stars, #stars2, #stars3 {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-repeat: repeat;
        background-position: 0 0;
        animation: move-twink-back 200s linear infinite;
    }
    #stars { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); }
    #stars2 { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); animation-duration: 150s; opacity: 0.6; }
    #stars3 { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); animation-duration: 100s; opacity: 0.3; }

    @keyframes move-twink-back {
        from { background-position: 0 0; } to { background-position: -10000px 5000px; }
    }

    /* === MAIN CONTENT CONTAINER === */
    .container {
        text-align: center;
        z-index: 2;
        padding: 30px 40px;
        background: rgba(12, 0, 26, 0.5);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.3);
        box-shadow: 0 8px 32px 0 rgba(255, 215, 0, 0.1);
        transform-style: preserve-3d;
        transition: opacity 0.6s ease, transform 0.6s ease;
        opacity: 0;
        transform: scale(0.85);
        pointer-events: none; /* hidden until login */
        max-width: 95vw;
    }
    @keyframes fadeInContainer {
        to { opacity: 1; transform: scale(1); }
    }

    /* === HEADING AND WISHES === */
    .main-heading {
        font-family: 'Great Vibes', cursive;
        font-size: clamp(3rem, 10vw, 5.5rem);
        color: #FFB300;
        text-shadow: 0 0 10px #ff7aa2, 0 0 25px #ff4d6e, 0 0 45px #ff2e6d;
        animation: flicker 4s infinite alternate;
    }
    @keyframes flicker {
        0%, 18%, 22%, 25%, 53%, 57%, 100% {
            text-shadow: 0 0 10px #FFD700, 0 0 25px #FFD700, 0 0 45px #ff8c00, 0 0 70px #ff8c00, 0 0 100px #ff8c00;
        }
        20%, 24%, 55% { text-shadow: none; }
    }

    .wish {
        font-size: clamp(1.2rem, 3vw, 1.5rem);
        color: #ffd6e0; /* Soft festive pink */
        margin: 15px 0;
        text-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    }

    .hero-image {
        width: 220px; height: 220px;
        margin: 20px auto;
        border-radius: 50%;
        border: 6px solid #FF6F00;
        box-shadow: 0 0 35px #ff4d6e, inset 0 0 15px rgba(0,0,0,0.5);
        animation: gentleFloat 5s infinite alternate ease-in-out;
    }
    .hero-image img {
        width: 100%; height: 100%; object-fit: cover; border-radius: 50%;
    }
    @keyframes gentleFloat {
        from { transform: translateY(-5px); } to { transform: translateY(5px); }
    }
    
    /* === BUTTON === */
    .continue-button {
        font-family: 'Hind', sans-serif;
        background: linear-gradient(145deg, #ff7aa2, #ff4d6e);
        color: #fff;
        font-size: 1.4rem; padding: 14px 40px; border: none; border-radius: 50px;
        font-weight: bold; text-transform: uppercase; letter-spacing: 1px;
        box-shadow: 0 8px 30px rgba(255,77,110,0.3), inset 0 0 5px rgba(255,255,255,0.15);
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 25px;
        position: relative;
    }
    .continue-button:hover {
        transform: scale(1.1) translateY(-5px);
        box-shadow: 0 0 35px gold, 0 0 60px #FFD700;
        background: linear-gradient(145deg, #fff08b, #ffc56e);
    }

    /* === FULLSCREEN VIDEO OVERLAY === */
    #video-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: radial-gradient(circle at 50% 50%, rgba(0,0,0,0.95), rgba(0,0,0,1));
        z-index: 9998;
        display: none; /* Controlled by JS */
        justify-content: center;
        align-items: center;
    }
    #video-overlay video {
        width: 100%;
        height: 100%;
        object-fit: contain; /* Use contain to fit 16:9 in landscape */
    }

    #close-video {
        position: fixed; top: 20px; right: 30px;
        font-size: 3rem; color: white;
        cursor: pointer; z-index: 9999;
        background: transparent; border: none;
        opacity: 0.5; transition: opacity 0.3s;
        padding: 5px 10px; /* Bigger tap area */
    }
    #unmute-video {
        position: fixed; top: 24px; right: 90px;
        font-size: 1.2rem; color: white; background: rgba(0,0,0,0.35);
        border: 1px solid rgba(255,255,255,0.12); padding: 8px 12px; border-radius:8px;
        cursor: pointer; z-index: 9999;
    }
    #audio-hint { position: fixed; bottom: 22px; right: 22px; color:#fff8; z-index:9999; font-size:0.9rem }
    #close-video:hover { opacity: 1; }
    
    /* === FLOATING PARTICLES (FEATHERS, FLUTES, FLOWERS) === */
    .particle {
        position: absolute; font-size: 2rem;
        pointer-events: none; z-index: 5; opacity: 0;
    }
    .dandiya, .stick { animation: rise 14s linear infinite; }
    @keyframes rise {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
    }
    .feather { filter: drop-shadow(0 0 5px #00e6e6); }
    .flute { filter: drop-shadow(0 0 5px #ffd700); }
    .flower { animation: fall 12s linear infinite; }
    @keyframes fall {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
    }
    .flower { filter: drop-shadow(0 0 5px #ff69b4); }

    /* === SPARKLE CURSOR TRAIL === */
    #cursor-trail {
        position: fixed; top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none; z-index: 9999;
    }

    /* === AUDIO CONTROL === */
    #mute-toggle {
        position: fixed; bottom: 20px; left: 20px;
        background: rgba(255, 215, 0, 0.7);
        border: none; border-radius: 50%;
        width: 50px; height: 50px;
        font-size: 1.5rem;
        cursor: pointer; z-index: 100;
        transition: all 0.3s;
    }
    #mute-toggle:hover {
        background: gold; transform: scale(1.1);
    }
    
    /* ======================================= */
    /* === RESPONSIVE DESIGN FOR SMALL SCREENS === */
    /* ======================================= */
    @media (max-width: 600px) {
        .container {
            padding: 25px 20px;
        }

        .main-heading {
            font-size: clamp(2.5rem, 12vw, 4rem);
        }

        .wish {
            font-size: clamp(1rem, 4vw, 1.2rem);
        }

        .hero-image {
            width: 150px;
            height: 150px;
            border-width: 4px;
        }

        .continue-button {
            font-size: 1.2rem;
            padding: 12px 30px;
        }
    }
    /* === LOGIN OVERLAY & CURTAIN === */
    .login-overlay {
        position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
        background: radial-gradient(circle at 30% 20%, rgba(0,0,0,0.7), rgba(0,0,0,0.9));
        z-index: 10001; color: #fff; font-family: 'Hind', sans-serif;
    }
    .login-card { background: rgba(255,255,255,0.04); padding: 28px; border-radius:12px; text-align:center; width: min(420px, 90%); box-shadow: 0 8px 40px rgba(0,0,0,0.6); }
    .login-card h2 { font-family: 'Great Vibes', cursive; color:#FFB300; font-size:2.4rem; margin-bottom:8px; }
    .login-card input { width:100%; padding:12px 14px; margin-top:12px; border-radius:8px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.35); color:#fff; }
    .login-card button { margin-top:12px; padding:10px 18px; border-radius:8px; border:none; background:linear-gradient(145deg,#ff7aa2,#ff4d6e); color:#fff; cursor:pointer; }
    .login-msg { margin-top:8px; color:#ffd6e0; min-height:18px; }

    .curtain {
        position: fixed; top:0; left:0; width:100%; height:100%; z-index:9999;
        background: linear-gradient(180deg,#2b0036 0%, #120012 100%);
        transition: height 2.2s ease, opacity 0.6s ease;
    }
    .curtain.open { height: 0; opacity: 0; pointer-events: none; }
    .container.revealed { opacity: 1; transform: scale(1); pointer-events: auto; }
</style>
</head>
<body>

<div id="preloader">
    <div class="loader-text">‡§®‡§µ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø ‡§∂‡•Å‡§≠ ‡§∂‡•Å‡§≠</div>
    <div style="margin-top:8px;font-size:1rem;color:#ffd6e0;">Preparing Garba & Dandiya...</div>
</div>

<div class="bg-divine">
    <div id="stars"></div><div id="stars2"></div><div id="stars3"></div>
</div>

<!-- Curtain that opens after successful login -->
<div class="curtain" id="curtain"></div>

<!-- Login overlay -->
<div class="login-overlay" id="loginOverlay">
    <div class="login-card">
        <h2>Navratri Utsav</h2>
        <div>Enter the password to begin</div>
        <input id="loginInput" type="password" placeholder="Type password here" aria-label="password input">
        <button id="loginBtn">Unlock</button>
        <div class="login-msg" id="loginMsg"></div>
    </div>
</div>

<main class="container">
    <div class="hero-image">
        <img src="https://i.pinimg.com/736x/8c/83/a8/8c83a8bc0ac93019ae11988b722fb6b7.jpg" alt="Navratri Dance">
    </div>
    <h1 class="main-heading">‡§∂‡•Å‡§≠ ‡§®‡§µ‡§∞‡§æ‡§§‡•ç‡§∞‡§ø</h1>
    <p class="wish">May Maa Durga bless you with strength, joy, and victory. Join the Garba!</p>
    <button class="continue-button" id="playVideoBtn">Start the Utsav</button>
</main>

    <div id="video-overlay">
    <button id="close-video">&times;</button>
    <button id="unmute-video" style="display:none">Unmute Video</button>
    <!-- Video: use j.mp4 (audio allowed) -->
    <video id="navratri-video" src="j.mp4" loop playsinline></video>
    <div id="audio-hint" style="display:none">If you don't hear video audio, click Unmute Video</div>
</div>

<!-- background music is not loaded until after unlock to avoid autoplay/prefetch on hosting -->
<audio id="background-music" preload="none" loop></audio>
<button id="mute-toggle">üîá</button>

<canvas id="cursor-trail"></canvas>

<script>
window.addEventListener('load', () => {
    // Hide pre-loader
    const preloader = document.getElementById('preloader');
    preloader.style.opacity = '0';
    setTimeout(() => {
        preloader.style.display = 'none';
        // Do not auto-play background music here. It will start only after successful login/unlock.
    }, 1000);

    const container = document.querySelector('.container');
    const body = document.body;

    // --- 3D Tilt Effect on Container ---
    container.addEventListener('mousemove', (e) => {
        const { left, top, width, height } = container.getBoundingClientRect();
        const x = e.clientX - left; const y = e.clientY - top;
        const rotateX = -1 * ((y - height / 2) / (height / 2)) * 10;
        const rotateY = ((x - width / 2) / (width / 2)) * 10;
        container.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
    });
    container.addEventListener('mouseleave', () => {
        container.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
    });

    // --- Floating Particles (Navratri: dandiya, flowers, lights) ---
    const particleEmojis = { rising: ['ÔøΩ', 'ÔøΩ', 'ü™ò'], falling: ['üíÉ', 'üë£', 'üå∫', 'üåº'] };
    function createParticle() {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        const type = Math.random() > 0.5 ? 'rising' : 'falling';
        if (type === 'rising') {
            const emoji = particleEmojis.rising[Math.floor(Math.random() * particleEmojis.rising.length)];
            particle.innerHTML = emoji;
            particle.classList.add(emoji === 'ü™∂' ? 'feather' : 'flute');
            particle.style.bottom = '-20px';
        } else {
            particle.innerHTML = particleEmojis.falling[Math.floor(Math.random() * particleEmojis.falling.length)];
            particle.classList.add('flower');
            particle.style.top = '-20px';
        }
        particle.style.left = Math.random() * 100 + 'vw';
        particle.style.fontSize = Math.random() * 1.5 + 1 + 'rem';
        const duration = Math.random() * 8 + 10;
        particle.style.animationDuration = duration + 's';
        particle.style.animationDelay = Math.random() * 5 + 's';
        body.appendChild(particle);
        setTimeout(() => particle.remove(), (duration + 5) * 1000);
    }
    setInterval(createParticle, 500);
    for(let i = 0; i < 20; i++) createParticle();

    // --- Sparkle Cursor Trail ---
    const canvas = document.getElementById('cursor-trail');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    const cursor = { x: canvas.width / 2, y: canvas.height / 2 };
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    });
    document.addEventListener('mousemove', (e) => {
        cursor.x = e.clientX; cursor.y = e.clientY;
    });
    class Particle {
        constructor() {
            this.x = cursor.x; this.y = cursor.y;
            this.size = Math.random() * 3 + 1;
            this.speedX = Math.random() * 3 - 1.5; this.speedY = Math.random() * 3 - 1.5;
            // Navratri festive palette: magenta, orange, gold
            const palettes = [320, 10, 45]; // h values
            const h = palettes[Math.floor(Math.random() * palettes.length)] + Math.random() * 10 - 5;
            this.color = `hsl(${h}, 90%, 65%)`;
        }
        update() {
            this.x += this.speedX; this.y += this.speedY;
            if (this.size > 0.2) this.size -= 0.1;
        }
        draw() {
            ctx.fillStyle = this.color; ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
        }
    }
    function handleParticles() {
        particles.push(new Particle());
        for (let i = 0; i < particles.length; i++) {
            particles[i].update(); particles[i].draw();
            if (particles[i].size <= 0.3) { particles.splice(i, 1); i--; }
        }
    }
    function animateTrail() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); handleParticles();
        requestAnimationFrame(animateTrail);
    }
    animateTrail();

    // === UPDATED Fullscreen Video & Audio Logic ===
    const playBtn = document.getElementById('playVideoBtn');
    const videoOverlay = document.getElementById('video-overlay');
    const videoPlayer = document.getElementById('navratri-video');
    const closeBtn = document.getElementById('close-video');
    const backgroundAudio = document.getElementById('background-music');
    const unmuteBtn = document.getElementById('unmute-video');
    const audioHint = document.getElementById('audio-hint');
    const loginOverlay = document.getElementById('loginOverlay');
    const loginBtn = document.getElementById('loginBtn');
    const loginInput = document.getElementById('loginInput');
    const loginMsg = document.getElementById('loginMsg');
    const curtain = document.getElementById('curtain');

    // Start the Utsav: pause background music and play the visual video
    playBtn.addEventListener('click', () => {
        videoOverlay.style.display = 'flex';
        // Pause background music and ensure video audio is unmuted
        try { backgroundAudio.pause(); } catch(e){}
        try { videoPlayer.muted = false; videoPlayer.volume = 1.0; } catch(e){}
        videoPlayer.play().catch(err => console.warn('Video play failed:', err.message));
        // Show unmute control in case browser muted the video or audio autoplay blocked
        setTimeout(() => {
            unmuteBtn.style.display = 'block';
            audioHint.style.display = 'block';
        }, 300);

        const isMobile = window.innerWidth < 768;

        // On mobile, try to lock to landscape for a better video experience
        if (isMobile && screen.orientation && typeof screen.orientation.lock === 'function') {
            screen.orientation.lock('landscape').then(() => {
                videoOverlay.requestFullscreen().catch(err => console.error(err.message));
            }).catch(err => {
                console.warn("Could not lock screen orientation:", err.message);
                videoOverlay.requestFullscreen().catch(err => console.error(err.message));
            });
            } else {
            // On desktop or unsupported devices, just go fullscreen
            videoOverlay.requestFullscreen().catch(err => {
                console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
            });
        }
    });

    unmuteBtn.addEventListener('click', () => {
        try {
            if (videoPlayer.muted) {
                videoPlayer.muted = false; videoPlayer.volume = 1.0;
                // pause background audio when video sound is enabled
                try { backgroundAudio.pause(); } catch(e){}
                unmuteBtn.textContent = 'Mute Video';
                audioHint.style.display = 'none';
            } else {
                videoPlayer.muted = true; unmuteBtn.textContent = 'Unmute Video';
                audioHint.style.display = 'block';
            }
        } catch(e) { console.warn(e); }
    });

    // --- LOGIN / UNLOCK FLOW ---
    function unlockIfPassword() {
        const val = (loginInput.value || '').trim();
        // the secret password (case-insensitive) - change if you want another
        if (val.toLowerCase() === 'navratri utsav') {
            loginMsg.textContent = 'Welcome! Opening the Utsav...';
            // animate curtain up
            curtain.classList.add('open');
            // hide login overlay
            loginOverlay.style.display = 'none';
            // reveal main container after short delay
            setTimeout(() => {
                document.querySelector('.container').classList.add('revealed');
                // Load and start background audio only now to avoid preloading on hosting platforms
                try {
                    backgroundAudio.src = 'a.mp3';
                    backgroundAudio.load();
                    backgroundAudio.play().catch(err => console.warn('Background audio play blocked:', err.message));
                } catch(e) { console.warn('Audio start failed', e); }
            }, 800);
        } else {
            loginMsg.textContent = 'Incorrect password ‚Äî try "Navratri Utsav"';
            loginInput.value = '';
        }
    }

    loginBtn.addEventListener('click', unlockIfPassword);
    loginInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') unlockIfPassword(); });

    function closeFullscreenVideo() {
        videoOverlay.style.display = 'none';
        videoPlayer.pause();
        videoPlayer.currentTime = 0;
        backgroundAudio.play().catch(e => console.log("Audio play failed after closing video."));
        
        if (document.fullscreenElement) {
            document.exitFullscreen();
        }
        // Unlock screen orientation when video is closed
        if (screen.orientation && typeof screen.orientation.unlock === 'function') {
            screen.orientation.unlock();
        }
    }
    
    closeBtn.addEventListener('click', closeFullscreenVideo);

    document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
            closeFullscreenVideo();
        }
    });

    // --- Audio Control Logic ---
    const muteButton = document.getElementById('mute-toggle');
    backgroundAudio.volume = 0.5;
    
    muteButton.addEventListener('click', () => {
        backgroundAudio.muted = !backgroundAudio.muted;
        muteButton.textContent = backgroundAudio.muted ?  'üîä':'üîá';
    });
});
</script>

</body>
</html>
